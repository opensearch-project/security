_meta:
  type: "roles"
  config_version: 2

# Restrict users so they can only view visualization and dashboard on kibana
kibana_read_only:
  reserved: true

# The security REST API access role is used to assign specific users access to change the security settings through the REST API.
security_rest_api_access:
  reserved: true
 

# Allows users to use all alerting functionality : TODO: tighten this further.
alerting_role:
  reserved: false
  cluster_permissions:
    - cluster_monitor
  index_permissions:
    - index_patterns:
      - '.opendistro-alerting-config'
      allowed_actions:
        - indices_all
      dls: '{"bool":{"should":[{"match":{"monitor.createdBy":"${user.name}"}},{"match":{"destination.createdBy":"${user.name}"}}]}}'
    - index_patterns:
      - '.opendistro-alerting-alert*'
      allowed_actions:
        - indices_all
      dls: '{"match": {"monitor_created_by": "${user.name}"}}'
    - index_patterns:
      - "*"
      allowed_actions:
        - indices_monitor
        - indices:admin/aliases/get
        - indices:admin/mappings/get
        - indices:monitor


